# HTTP

π”— https://github.com/jeonghwan-kim/lecture-http  
π”— https://jeonghwan-kim.github.io/2024/07/07/lecture-http-part1

<br>

# 1.4 cURL

π”— cURL λ‹¤μ΄λ΅λ“: https://curl.se/download.html

- client for URLμ μ•½μ. URLμ„ λ°›μ•„ μ„λ²„λ΅ μ”μ²­μ„ λ³΄λ‚΄κ³  λ°›μ€ μ‘λ‹µμ„ μ¶λ ¥ν•λ” λ„κµ¬
- cURLλ΅ HTTP μ”μ²­ λ° μ‘λ‹µ ν™•μΈν•κΈ°

```shell
$ curl http://localhost:3000/ch01.txt -v
$ curl http://localhost:3000/ch01.txt --verbose
```

- κ²°κ³Ό

```shell
* Host localhost:3000 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
*   Trying [::1]:3000...
* Connected to localhost (::1) port 3000
> GET /ch01.txt HTTP/1.1
> Host: localhost:3000
> User-Agent: curl/8.7.1
> Accept: */*
>
* Request completely sent off
< HTTP/1.1 200 OK
< Date: Fri, 31 Jan 2025 08:51:06 GMT
< Connection: keep-alive
< Keep-Alive: timeout=5
< Transfer-Encoding: chunked
<
HTTP Lecture

Chapter 1. Basic
  1.1 HTTP Start
* Connection #0 to host localhost left intact
  1.2 HTTP Message%
```

<br>

# 2.2 URL

```shell
ν”„λ΅ν† μ½://λ„λ©”μΈ:ν¬νΈ/κ²½λ΅?μΏΌλ¦¬λ¬Έμμ—΄#μ•µμ»¤
```

- Uniform Resource Locator
- URL: ν΄λΌμ΄μ–ΈνΈμ™€ μ”μ²­μ„ λ³΄λ‚Ό λ• λ€μƒμ΄ λλ” κ²ƒ
- μΌμ •ν• λ°©μ‹μ μμ›, μ„μΉ νƒμ‚¬κΈ°, μΈν„°λ„· μƒμ νμΌ μ„μΉλ¥Ό μ§€μ •ν•λ” λ°©μ‹

## 2.2.1 ν”„λ΅ν† μ½

> <b>http:</b>//λ„λ©”μΈ:ν¬νΈ/κ²½λ΅?μΏΌλ¦¬λ¬Έμμ—΄#μ•µμ»¤

- URLμ€ ν”„λ΅ν† μ½ μ΄λ¦„μΌλ΅ μ‹μ‘ν•λ‹¤.
- ν”„λ΅ν† μ½μ€ URLμ μΆ…λ¥λ¥Ό κ²°μ •ν•λ” μ—­ν• μ„ ν•λ‹¤.
- http λΌκ³  ν•λ©΄ μ›Ή λ¬Έμ„λ¥Ό μ‹λ³„ν•λ” URL
- λ‹¤λ¥Έ ν”„λ΅ν† μ½
  - mailto: μ΄λ©”μΌ μ „μ†΅μ© ν”„λ΅ν† μ½
  - tel: μ „ν™”λ¥Ό μ„ν• ν”„λ΅ν† μ½

## 2.2.2 λ„λ©”μΈ

> http://<strong style="font-size: 1.4em">localhost</strong>:ν¬νΈ/κ²½λ΅?μΏΌλ¦¬λ¬Έμμ—΄#μ•µμ»¤

- μ„λ²„μ μ„μΉλ¥Ό λ‚νƒ€λƒ„
- λ„λ©”μΈμ IPλ¥Ό μ•λ ¤μ£Όλ” μ„λ²„μΈ Domain Name System. μ¤„μ—¬μ„ DNSμ— λ„λ©”μΈ μ£Όμ†λ¥Ό μ „λ‹¬ν•λ©΄ IPμ£Όμ†λ¥Ό μ–»μ„ μ μλ‹¤.
- λ„λ©”μΈ μ„μΉμ— IPμ£Όμ†λ¥Ό λ°”λ΅ μ‚¬μ©ν•΄λ„ λ¨

## 2.2.3 ν¬νΈ

> http://localhost<strong  style="font-size: 1.4em">:3000</strong>/κ²½λ΅?μΏΌλ¦¬λ¬Έμμ—΄#μ•µμ»¤

- IPλ΅ μ ‘μ†ν• μ„λ²„λ” μ—¬λ¬ κ°μ ν¬νΈκ°€ μμ
- ν΄λΌμ΄μ–ΈνΈλ” νΉμ • ν¬νΈλ¥Ό ν†µν•΄ μ„λ²„μ— μ ‘μ†ν•κ³ , νΉμ • μ–΄ν”λ¦¬μΌ€μ΄μ…μ— μ ‘μ†ν•  μ μλ‹¤.
- ν¬νΈλ” 0λ¶€ν„° 65535 μ‚¬μ΄μ μ •μκ°’μ„ μ“΄λ‹¤.
  - 0 ~ 1023: μ •ν•΄μ§„ ν¬νΈ (μ‚¬μ©ν•λ ¤λ©΄ μ΄μμ²΄μ μ κ΄€λ¦¬μ κ¶ν•μ΄ μμ–΄μ•Ό ν•λ‹¤.)
    - http ν”„λ΅ν† μ½: 80
    - https ν”„λ΅ν† μ½: 443
    - νμΌ μ „μ†΅μ„ μ„ν• ν”„λ΅ν† μ½: 22
    - shell: 22
    - email: 25 λ“±
  - 1024 ~ 49151: λ“±λ΅λ ν¬νΈ
    - κ°λ°ν™κ²½ κµ¬μ„± μ‹ μ‚¬μ©
  - λ‚λ¨Έμ§€
    - λ™μ  ν¬νΈ (μΌμ‹μ μΌλ΅ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ™€ ν†µμ‹ ν•κΈ° μ„ν• ν¬νΈ)

## 2.2.4 κ²½λ΅

> http://localhost:3000<strong  style="font-size: 1.4em">/ch01.txt</strong>?μΏΌλ¦¬λ¬Έμμ—΄#μ•µμ»¤

- μ„λ²„κ°€ μ κ³µν•λ” νμΌμ μ„μΉ
- κ²½λ΅
- μƒν™©μ— λ”°λΌμ„λ” μ„λ²„μ μ‹¤μ  κ²½λ΅κ°€ μ•„λ‹ μλ„ μλ‹¤. (μ„λ²„ κµ¬ν„μ— λ”°λΌ λ‹¤λ¥΄λ‹¤.)
- μ„λ²„κ°€ μ™Έλ¶€μ— μ κ³µν•λ” μ¶”κ°•ν™”λ κ°λ…μ΄λΌκ³  μ΄ν•΄ν•λ”κ²ƒμ΄ λ” μΆ‹λ‹¤.

## 2.2.5 μΏΌλ¦¬λ¬Έμμ—΄

> http://localhost:3000/ch01.txt<strong  style="font-size: 1.4em">?query=name</strong>#μ•µμ»¤

- μ„λ²„μ— μ¶”κ°€λ΅ μ •λ³΄λ¥Ό μ „λ‹¬ν•  λ• μ‚¬μ©
- κ²½λ΅ λ’¤μ— ? λ΅ μ‹μ‘ν•λ©° key=value ν•νƒ, ν•λ‚ μ΄μƒμΌ λ•λ” &λ΅ μ—°κ²°

## 2.2.6 ν”„λ κ·Έλ¨ΌνΈ

> http://localhost:3000/ch01.txt?query=name<strong  style="font-size: 1.4em">#title</strong>

- μ›Ήνμ΄μ§€ λ‚΄μ— νΉμ • μ„μΉλ¥Ό κ°€λ¦¬ν‚΄
- html λ§ν¬μ—… id μ†μ„±κ³Ό λ§¤μΉ­ λ¨

<br>

# 2.3 μ”μ²­, request

```shell
# μ”μ²­ ν—¤λ”
> GET /ch01.txt HTTP/1.1
> Host: localhost:3000
> User-Agent: curl/8.7.1
> Accept: */*
>
```

- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ μ „λ‹¬ν•λ” λ©”μ‹μ§€
- κµ¬μ„±
  - μ”μ²­ λ©”μ‹μ§€: λ©”μ„λ“μ™€ κ²½λ΅, ν—¤λ”, λ³Έλ¬ΈμΌλ΅ κµ¬μ„±
  - λ©”μ„λ“: GET, POST, PUT, PATCH, DELETE
  - κ²½λ΅: μμ›μ μ„μΉ
  - ν”„λ΅ν† μ½ λ²„μ „
  - μ”μ²­ λ³Έλ¬Έ

> <strong>GET / ch01.txt HTTP/1.1</strong>

- GET: λ©”μ†λ“
  - ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ”μ²­ λ°©μ‹μ„ μ •μ
  - ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ–΄λ–¤ μ‘μ—…μ„ μν–‰ν• μ§€λ¥Ό λ©”μ„λ“λ΅ μ „λ‹¬
  - λ©”μ†λ“
    - GET: μ„λ²„λ΅λ¶€ν„° μμ›μ„ μ”μ²­ν•  λ• μ‚¬μ©
    - POST: μ„λ²„λ΅ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κ³  μ„λ²„λ” μ΄ μΌμ„ μ²λ¦¬ν•΄ μƒλ΅μ΄ μμ›μ„ μƒμ„±
    - PUT: μ„λ²„μ λ¦¬μ†μ¤ κµμ²΄
    - PATCH: μ„λ²„μ λ¦¬μ†μ¤λ¥Ό λ¶€λ¶„μ μΌλ΅ κµμ²΄
    - DELETE: μ„λ²„μ νΉμ„± λ¦¬μ†μ¤λ¥Ό μ‚­μ 
- /ch01.txt: κ²½λ΅
  - μ„λ²„μ μ–΄λ–¤ νμΌμ„ κ°€λ¦¬ν‚¤λ”μ§€ μ•λ ¤μ¤
- HTTP/1.1: ν”„λ΅ν† μ½ λ²„μ „

> Host: localhost: 3000

- Host: localhost:3000: μ”μ²­μ„ λ³΄λ‚Ό νΈμ¤νΈμ™€ ν¬νΈλ²νΈ (μ„λ²„μ μ„μΉ)

> User-Agent: curl/8.7.1

- User-Agent: ν΄λΌμ΄μ–ΈνΈ μ •λ³΄
  - curlμ„ μ‚¬μ©ν–κΈ° λ•λ¬Έμ— curl/8.7.1 μ΄λΌλ” κ°’μΌλ΅ λ‚νƒ€λ‚¨
  - λΈλΌμ°μ €λΌλ©΄ λΈλΌμ°μ € μ΄λ¦„μ΄ μ‹¤λ¦°λ‹¤.

> Acccept: \*/\*

- Accept: ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ–¤ μ»¨ν…μΈ  νƒ€μ…μ„ λ°›μ„ μ μλ”μ§€ ν‘μ‹ν•λ” κ°’
  - \*/\*: μ–΄λ–¤ μ»¨ν…μΈ  νƒ€μ…μ΄λ“  λ°›μ„ μ μλ‹¤λ” μλ―Έ
- μ”μ²­ ν—¤λ”μ λ§μ§€λ§‰μ„ λΉ μ¤„λ΅ μ…λ ¥ν•λ©΄ μ”μ²­ν—¤λ”κ°€ λλ‚¬λ‹¤ λΌλ” μλ―Έ

## μ”μ²­ ν—¤λ”μ μΆ…λ¥

- Accept
- Accept-Encoding
- Accept-Language
- User-Agent
- Cookie
- Origin

- μΊμ‹± κ΄€λ ¨

  - If-Modifyied-Since
  - If-None-Match

- λ³΄μ• κ΄€λ ¨
  - Access-Control-Allow-Headers
  - Access-Control-Allow-Method

## μ”μ²­ λ³Έλ¬Έ

- μμ‹μ—λ” μ—†μ§€λ§ ν—¤λ”κ°€ λλ‚ λ’¤μ—λ” μ”μ²­ λ³Έλ¬Έμ„ μ‹¤μ„ μ μλ‹¤.
- μ”μ²­ ν—¤λ”μ™€ λ‹¬λ¦¬ μ”μ²­ λ³Έλ¬Έμ€ methodμ— λ”°λΌμ„ μ„ νƒμ‚¬ν•­ μ„
- POSTλ‚ PUT, PATCH κ°™μ€ methodμ—μ„λ” μ‚¬μ©ν•  μ μλ‹¤.

<br>

# 2.4 μ‘λ‹µ, response

```shell
# μ‘λ‹µ ν—¤λ”
< HTTP/1.1 200 OK
< Date: Fri, 31 Jan 2025 08:51:06 GMT
< Connection: keep-alive
< Keep-Alive: timeout=5
< Transfer-Encoding: chunked
<
```

- ν΄λΌμ΄μ–ΈνΈκ°€ μ‘λ‹µ λ°›λ” λ©”μ‹μ§€
- κµ¬μ„±
  - μƒνƒ μ½”λ“: 1xx, 2xx, 3xx, 4xx, 5xx
  - μ‘λ‹µ ν—¤λ”
  - μ‘λ‹µ λ³Έλ¬Έ

> HTTP/1.1 200 OK

- ν”„λ΅ν† μ½ λ²„μ „: ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ”μ²­μ‹μ— ν”„λ΅ν† μ½ λ²„μ „μ„ μ„λ²„μ—μ„λ„ μ‚¬μ©ν•  μ μλ” κ²½μ°μ— κ°™μ€ λ²„μ „μ„ ν‘μ‹ν•μ—¬ μ‚¬μ© ν•  ν”„λ΅ν† μ½μ„ μ„λ΅ λ§μ¶λ‹¤.
- μƒνƒμ½”λ“μ™€ μƒνƒ λ¬Έμ: μ”μ²­ λ°›μ€ μ„λ²„κ°€ μ²λ¦¬ κ²°κ³Όλ¥Ό μ•λ ¤μ¤€λ‹¤.
  - μƒνƒ κ°’
    - 1XX: μ •λ³΄ μ‘λ‹µ
      - 101: μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ ν”„λ΅ν† μ½ μ „ν™ μ”μ²­μ„ μΉμΈν•  λ•
    - 2XX: μ„±κ³µμ„ μλ―Έ
      - 200: μ”μ²­μ— μ„±κ³µ
      - 201: μ„±κ³µ, μμ›μƒμ„±
      - 204: μ”μ²­μ€ μ„±κ³µν–μ§€λ§ μ‘λ‹µν•  λ³Έλ¬Έμ€ μ—†μ„ λ•
    - 3XX: λ¦¬λ‹¤μ΄λ ‰μ…
      - 301: μ”μ²­ν• λ¦¬μ†μ¤ URLκ°€ μκµ¬μ μΌλ΅ λ‹¤λ¥Έ μ£Όμ†λ΅ λ°”λ€μ—μ. λ°”λ€ μ£Όμ†λ” μ‘λ‹µ ν—¤λ”μ΄ μ‹£λ”λ‹¤
      - 302: μ”μ²­ν• λ¦¬μ†μ¤κ°€ μ„μ‹μ μΌλ΅ λ‹¤λ¥Έ URLλ΅ λ³€κ²½λλ‹¤.
      - 304: ν΄λΌμ΄μ–ΈνΈκ°€ μΊμ‹±ν• λ¦¬μ†μ¤λ¥Ό μ‚¬μ©ν•΄λ„ λλ‹¤. λ³Έλ¬Έμ€ λΉ„μ›μ„ μ΄
    - 4XX: ν΄λΌμ΄μ–ΈνΈ μ¤λ¥. μ”μ²­μ— λ¬Έμ κ°€ μμ–΄μ„ μ„λ²„κ°€ μ²λ¦¬ν•μ§€ λ»ν–μ„ κ²½μ°
      - 400: bad request μλ»λ μ”μ²­
      - 401: μΈμ¦μ΄ ν•„μ”ν• κ²½μ°
      - 404: μ—†λ” νμ΄μ§€ μ”μ²­ν•  κ²½μ°
    - 5XX: μ„λ²„ μ²λ¦¬ μ¤λ¥. μ”μ²­ μμ²΄λ” λ¬Έμ κ°€ μ—†μ§€λ§ μ„λ²„μ μ΄μ λ΅ μ”μ²­μ„ μ²λ¦¬ν•μ§€ λ»ν•¨
      - 500: μΈν„°λ„ μ„λ²„ μ—λ¬ - μ„λ²„μ—μ„ μμƒν•μ§€ λ»ν• μ¤λ¥ λ°μƒ
      - 503: μ„λ²„κ°€ ν„μ¬ μ”μ²­μ„ μ²λ¦¬ν•  μ μ—†μ (μ„λ²„ λ‹¤μ΄)
      - 504: time out

> Date: Fri, 31 Jan 2025 08:51:06 GMT

- μ„λ²„κ°€ μ‘λ‹µν• μ‹κ°„

> Connection: keep-alive

- TCP μ—°κ²°μ„ μΌμ •μ‹κ°„ μ μ§€ν•κΈ° μ„ν•΄ μ“°λ” ν—¤λ”
- ν΄λΌμ΄μ–ΈνΈλ” 3way handshakeλ¥Ό λ§λ“¤μ§€ μ•κ³  μ΄λ―Έ μ—°κ²°λ TCP μ„μ— HTTPμ”μ²­μ„ λ‹¤μ‹ λ³΄λ‚Ό μ μλ‹¤.

> Keep-Alive: timeout=5

- TCP μ—°κ²°μ„ μ μ§€ν•  μ μλ” μ ν•μ‹κ°„ (5μ΄)

## μ‘λ‹µ ν—¤λ”μ μΆ…λ¥

- Content-Type
- Content-Encoding
- Accept-Language
- Vary
- Set-Cookie
- μΊμ‹± κ΄€λ ¨
  - Last-Modified
  - ETag
  - Cache-Control
  - Expires
- λ³΄μ• κ΄€λ ¨
  - Content-Security-Polycy
  - Content-Security-Polycy-Report-Only
  - Access-Control-Allow-Methods
  - Access-Control-Allow-Max-Age

## μ‘λ‹µ λ³Έλ¬Έ

- μ‘λ‹µ ν—¤λ”μ λ§μ§€λ§‰ μ¤„μ„ λΉ„μ°κ³  λ‚λ©΄ λ³Έλ¬Έμ΄ μ‹μ‘λλ‹¤.
- μ‹¤μ  λ°μ΄ν„°

```
HTTP Lecture

Chapter 1. Basic
  1.1 HTTP Start
  1.2 HTTP Message* Connection #0 to host localhost left intact
```
